assadfsadfpackage main

import (
	"fmt"
	"os/exec"
	"strings"
)

func toggleCmdline() {
	if !ctrlWin.focused {
		ctrlWin.visible = true
		ctrlWin.SetFocus(true)
		CurWin().SetFocus(false)
		return
	}
	ctrlWin.visible = false
	ctrlWin.SetFocus(false)
	CurWin().SetFocus(true)

	// TODO: should call some sort of ResizeAll here...
	screen.Clear()
	screen.Sync()
}

func parseCmd(input []byte) {
	if len(input) < 1 {
		return
	}

	switch input[0] {
	case 'f':
		var names []string
		for _, win := range AllWindows() {
			names = append(names, fmt.Sprintf("    %3s %s", win.Flags(), win.Name()))
		}
		printMsg(strings.Join(names, "\n"))
	case '!':
		cmd := strings.Split(string(input[1:]), " ")
		out, err := exec.Command(cmd[0], cmd[1:]...).Output()
		if err != nil {
			printMsg("error: %s", err)
			break
		}
		printMsg("%s", out)
	default:
		printMsg("?")
	}
}
